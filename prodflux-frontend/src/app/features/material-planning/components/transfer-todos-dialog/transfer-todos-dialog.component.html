<h2 mat-dialog-title>Transfer-Übersicht (ToDos)</h2>

<mat-dialog-content>
  <table mat-table [dataSource]="data.transferTodos" class="todos-table">
    <!-- Material Column -->
    <ng-container matColumnDef="material">
      <th mat-header-cell *matHeaderCellDef>Material</th>
      <td mat-cell *matCellDef="let todo">{{ todo.materialName }}</td>
    </ng-container>

    <!-- From/To Column -->
    <ng-container matColumnDef="fromTo">
      <th mat-header-cell *matHeaderCellDef>Von → Nach</th>
      <td mat-cell *matCellDef="let todo">
        {{ todo.fromWorkshopName }} → {{ todo.toWorkshopName }}
      </td>
    </ng-container>

    <!-- Quantity Column -->
    <ng-container matColumnDef="quantity">
      <th mat-header-cell *matHeaderCellDef>Menge</th>
      <td mat-cell *matCellDef="let todo">{{ todo.quantity | number:'1.0-2' }}</td>
    </ng-container>

    <!-- Done Column -->
    <ng-container matColumnDef="done">
      <th mat-header-cell *matHeaderCellDef>Erledigt</th>
      <td mat-cell *matCellDef="let todo">
        <mat-checkbox [(ngModel)]="todo.done" (change)="toggleTodoDone(todo.id)">
        </mat-checkbox>
      </td>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Aktionen</th>
      <td mat-cell *matCellDef="let todo">
        <button mat-icon-button color="warn" type="button" (click)="deleteTodo(todo.id)">
          <mat-icon>delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" [class.completed]="row.done"></tr>
  </table>

  <div class="backend-note">
    <strong>Backend Integration (Step 7):</strong>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onClose()">Schließen</button>
  <button mat-raised-button color="primary" (click)="onCreateTransfers()">
    Alle offenen Transfers im Backend anlegen
  </button>
</mat-dialog-actions>
