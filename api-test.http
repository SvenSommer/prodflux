### üîê AUTHENTIFIZIERUNG

### Login
POST http://localhost:8000/api/auth/login/
Content-Type: application/json

{
  "username": "rh",
  "password": "meqban-seVny5-kofvyq"
}

@access_token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzQ0MzU3ODgwLCJpYXQiOjE3NDQzNTc1ODAsImp0aSI6IjJhYTcxNWVjM2YzMjQ4YTA4NjAwYjQyYmRhNDA1ZWM5IiwidXNlcl9pZCI6MX0.RdLXBoIFmlGToFmHwOqbB5ngmGUjVqImCZ6AskSO6v4

### Token-Info
GET http://localhost:8000/api/auth/me/
Authorization: Bearer {{access_token}}

### Logout (optional)
POST http://localhost:8000/api/auth/logout/
Authorization: Bearer {{access_token}}


### üè≠ WERKST√ÑTTEN

### Alle Werkst√§tten anzeigen
GET http://localhost:8000/api/workshops/
Authorization: Bearer {{access_token}}

### Werkstatt anlegen
POST http://localhost:8000/api/workshops/
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "name": "Neue Werkstatt"
}

@workshop_id = 3
### Werkstatt aktualisieren
PUT http://localhost:8000/api/workshops/{{workshop_id}}/
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "name": "Werkstatt aktualisiert"
}

### Werkstatt l√∂schen
DELETE http://localhost:8000/api/workshops/{{workshop_id}}/
Authorization: Bearer {{access_token}}


### üß± MATERIALIEN

### Alle Materialien anzeigen
GET http://localhost:8000/api/materials/
Authorization: Bearer {{access_token}}

### Material anlegen
POST http://localhost:8000/api/materials/
Authorization: Bearer {{access_token}}
Content-Type: application/json

{                                  
    "bezeichnung": "D-Sub Schraubensatz",    
    "hersteller_bezeichnung": "BKL 10120291",
    "preis_brutto": 1.15,   
    "quelle": "reichelt.de",    
    "bestell_nr": "BKL 10120291"
  }


@material_id = 4
### Material anzeigen
GET http://localhost:8000/api/materials/{{material_id}}/
Authorization: Bearer {{access_token}}

### Material aktualisieren
PUT http://localhost:8000/api/materials/{{material_id}}/
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "bezeichnung": "D-Sub Schraubensatz (aktualisiert)",
  "preis_brutto": 5.00
}

### Material l√∂schen
DELETE http://localhost:8000/api/materials/{{material_id}}/
Authorization: Bearer {{access_token}}

### Materialbestand (in Werkstatt)
GET http://localhost:8000/api/materials/{{material_id}}/stock?workshop_id={{workshop_id}}
Authorization: Bearer {{access_token}}

### Materialbewegungen (in Werkstatt)
GET http://localhost:8000/api/materials/{{material_id}}/movements?workshop_id={{workshop_id}}
Authorization: Bearer {{access_token}}


### üìá PRODUKTE

### Alle Produkte anzeigen
GET http://localhost:8000/api/products/
Authorization: Bearer {{access_token}}

### Produkt anlegen
POST http://localhost:8000/api/products/
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "bezeichnung": "SD-ATR833-E (neu)",
  "menge": 1,
  "preis": 119,
  "g_preis_brutto": 100,
  "netto": 119
}

@product_id = 1

### Produkt anzeigen
GET http://localhost:8000/api/products/{{product_id}}/
Authorization: Bearer {{access_token}}

### Produkt aktualisieren
PUT http://localhost:8000/api/products/{{product_id}}/
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "bezeichnung": "√úberarbeitetes Produkt",
  "menge": 1,
  "preis": 110,
  "g_preis_brutto": 100,
  "netto": 119
}

### Produkt l√∂schen
DELETE http://localhost:8000/api/products/{{product_id}}/
Authorization: Bearer {{access_token}}

### Produktbestand in Werkstatt
GET http://localhost:8000/api/products/{{product_id}}/stock?workshop_id={{workshop_id}}
Authorization: Bearer {{access_token}}

### Ben√∂tigte Materialien f√ºr Produkt
GET http://localhost:8000/api/products/1/materials/
Authorization: Bearer {{access_token}}

### Produkt fertigen
POST http://localhost:8000/api/manufacture/
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "product_id": {{product_id}},
  "workshop_id": {{workshop_id}},
  "quantity": 5
}

### Fertigbare St√ºckzahl f√ºr Produkt
GET http://localhost:8000/api/products/{{product_id}}/producible?workshop_id={{workshop_id}}
Authorization: Bearer {{access_token}}

### √úbersicht fertigbarer Produkte
GET http://localhost:8000/api/products/producible?workshop_id={{workshop_id}}
Authorization: Bearer {{access_token}}


### üîó MATERIAL ‚Üî PRODUKT-ZUORDNUNG

### Material zu Produkt zuordnen
POST http://localhost:8000/api/product-materials/
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "product": {{product_id}},
  "material": {{material_id}},
  "quantity_per_unit": 2
}

### Material-Zuordnung l√∂schen
DELETE http://localhost:8000/api/product-materials/{{assignment_id}}/
Authorization: Bearer {{access_token}}


### üì¶ LIEFERUNGEN

### Alle Lieferungen anzeigen
GET http://localhost:8000/api/deliveries/
Authorization: Bearer {{access_token}}

### Lieferung anzeigen
GET http://localhost:8000/api/deliveries/1/
Authorization: Bearer {{access_token}}

### Lieferung anlegen
POST http://localhost:8000/api/deliveries/
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "workshop": {{workshop_id}},
  "note": "Initiale Lieferung",
  "items": [
    {
      "material": {{material_id}},
      "quantity": 100,
      "note": "Lagerauff√ºllung"
    }
  ]
}

### Lieferung vollst√§ndig aktualisieren
PUT http://localhost:8000/api/deliveries/1/
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "workshop": 1,
  "note": "Ge√§nderte Lieferung",
  "items": [
    {
      "material": 1,
      "quantity": 80,
      "note": "Erstlieferung 100 St√ºck (angepasst)"
    }
  ]
}
### Lieferung l√∂schen
DELETE http://localhost:8000/api/deliveries/1/
Authorization: Bearer {{access_token}}