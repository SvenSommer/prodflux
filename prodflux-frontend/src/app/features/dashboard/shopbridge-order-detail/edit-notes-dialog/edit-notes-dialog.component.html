<h2 mat-dialog-title class="dialog-title">
  <mat-icon>note</mat-icon>
  Kundennotiz bearbeiten
</h2>

<mat-dialog-content>
  <form [formGroup]="notesForm" class="notes-form">
    <div class="form-section">
      <div class="section-header">
        <mat-icon>comment</mat-icon>
        <span>Notiz des Kunden</span>
      </div>
      <p class="section-hint">
        Diese Notiz wurde vom Kunden w√§hrend der Bestellung hinterlassen.
      </p>
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Kundennotiz</mat-label>
        <textarea
          matInput
          formControlName="customer_note"
          rows="6"
          placeholder="Notiz eingeben..."></textarea>
        <mat-hint>{{ getCharacterCount() }} Zeichen</mat-hint>
      </mat-form-field>
    </div>

    <!-- Preview Section -->
    <div class="preview-section" *ngIf="notesForm.get('customer_note')?.value">
      <div class="preview-header">
        <mat-icon>visibility</mat-icon>
        <span>Vorschau</span>
      </div>
      <div class="preview-content">
        {{ notesForm.get('customer_note')?.value }}
      </div>
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">
    Abbrechen
  </button>
  <button
    mat-raised-button
    color="primary"
    [disabled]="saving || !hasChanges()"
    (click)="onSave()">
    <mat-spinner *ngIf="saving" diameter="20"></mat-spinner>
    <mat-icon *ngIf="!saving">save</mat-icon>
    {{ saving ? 'Speichern...' : 'Speichern' }}
  </button>
</mat-dialog-actions>
